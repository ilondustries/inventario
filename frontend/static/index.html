<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control de Herramienta Longoria Tooling</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîß</text></svg>">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-top">
                <h1>üîß Control de Herramienta Longoria Tooling</h1>
                <div id="userInfo" class="user-info">
                    <!-- Informaci√≥n del usuario se cargar√° aqu√≠ -->
                </div>
            </div>
            <div class="stats-bar">
                <div class="stat-item">
                    <span class="stat-label">Total Productos:</span>
                    <span id="totalProductos" class="stat-value">0</span>
                </div>
                <div id="stockBajoContainer" class="stat-item">
                    <span class="stat-label">Stock Bajo:</span>
                    <span id="stockBajo" class="stat-value warning">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Valor Total:</span>
                    <span id="valorTotal" class="stat-value">$0.00</span>
                </div>
            </div>
        </header>
        
        <div class="main-content">
            <!-- Formulario para agregar/editar productos -->
            <div class="form-section">
                <h2 id="formTitle">‚ûï Agregar Herramienta</h2>
                <form id="productoForm">
                    <input type="hidden" id="productoId" value="">
                    
                    <div class="input-group">
                        <label for="nombre">Nombre de la Herramienta: *</label>
                        <input type="text" id="nombre" placeholder="Ej: Martillo" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="descripcion">Descripci√≥n:</label>
                        <textarea id="descripcion" placeholder="Descripci√≥n del producto"></textarea>
                    </div>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label for="cantidad">Cantidad: *</label>
                            <input type="number" id="cantidad" placeholder="0" min="0" required>
                        </div>
                        
                        <div class="input-group">
                            <label for="cantidadMinima">Cantidad M√≠nima:</label>
                            <input type="number" id="cantidadMinima" placeholder="5" min="0">
                        </div>
                    </div>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label for="categoria">Categor√≠a:</label>
                            <input type="text" id="categoria" placeholder="Herramientas">
                        </div>
                        
                        <div class="input-group">
                            <label for="precioUnitario">Precio Unitario:</label>
                            <input type="number" id="precioUnitario" placeholder="0.00" min="0" step="0.01">
                        </div>
                    </div>
                    
                    <div class="form-buttons">
                        <button type="submit" id="submitBtn">Guardar Producto</button>
                        <button type="button" id="cancelBtn" onclick="app.cancelarEdicion()" style="display: none;">Cancelar</button>
                    </div>
                </form>
            </div>
            
            <!-- Lista de productos -->
            <div class="products-section">
                <div class="section-header">
                    <h2>üìã Inventario de Herramientas</h2>
                    <div class="search-bar">
                        <input type="text" id="searchInput" placeholder="Buscar por nombre, c√≥digo, ubicaci√≥n o categor√≠a... (Esc para limpiar)">
                    </div>
                </div>
                
                <div id="productosList" class="productos-grid">
                    <!-- Los productos se cargar√°n aqu√≠ din√°micamente -->
                </div>
            </div>
            
            <!-- Sistema de Tickets de Compra -->
            <div class="tickets-section">
                <div class="section-header">
                    <h2>üé´ Tickets de Compra</h2>
                    <button id="nuevoTicketBtn" class="btn-primary" onclick="app.mostrarFormularioTicket()">
                        ‚ûï Nuevo Ticket
                    </button>
                </div>
                
                <div id="ticketsList" class="tickets-grid">
                    <!-- Los tickets se cargar√°n aqu√≠ din√°micamente -->
                </div>
            </div>
        </div>
        
        <!-- Modal de confirmaci√≥n -->
        <div id="confirmModal" class="modal">
            <div class="modal-content">
                <h3>Confirmar Acci√≥n</h3>
                <p id="confirmMessage"></p>
                <div class="modal-buttons">
                    <button id="confirmYes" class="btn-danger">S√≠, eliminar</button>
                    <button id="confirmNo" onclick="app.cerrarModal()">Cancelar</button>
                </div>
            </div>
        </div>
        
        <!-- Notificaciones -->
        <div id="notification" class="notification"></div>
        
        <!-- Modal para mostrar QR de producto -->
        <div id="qrModal" class="modal">
            <div class="modal-content qr-modal-content">
                <h3>C√≥digo QR de la Herramienta</h3>
                <div id="qrProductoInfo"></div>
                <img id="qrProductoImg" src="" alt="QR de la herramienta" style="display:block;margin:0 auto;max-width:250px;max-height:250px;"/>
                <div class="modal-buttons">
                    <button onclick="app.imprimirQr()" class="btn-primary">üñ®Ô∏è Imprimir</button>
                    <button onclick="app.cerrarQrModal()">Cerrar</button>
                </div>
            </div>
        </div>
        
        <!-- Modal para crear/editar ticket -->
        <div id="ticketModal" class="modal">
            <div class="modal-content ticket-modal-content">
                <h3 id="ticketModalTitle">üé´ Nuevo Ticket de Compra</h3>
                <form id="ticketForm">
                    <div class="input-group">
                        <label for="ordenProduccion">Orden de Producci√≥n: *</label>
                        <input type="text" id="ordenProduccion" placeholder="Ej: OP-2024-001" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="justificacion">Justificaci√≥n: *</label>
                        <textarea id="justificacion" placeholder="Explique por qu√© necesita estas herramientas..." required></textarea>
                    </div>
                    
                    <div class="ticket-items-section">
                        <h4>üõ†Ô∏è Herramientas Solicitadas</h4>
                        <div id="ticketItemsList">
                            <!-- Items del ticket se agregar√°n aqu√≠ -->
                        </div>
                        <button type="button" id="agregarItemBtn" class="btn-secondary" onclick="app.agregarItemTicket()">
                            ‚ûï Agregar Herramienta
                        </button>
                    </div>
                    
                    <div class="modal-buttons">
                        <button type="submit" class="btn-primary">üì§ Enviar Ticket</button>
                        <button type="button" onclick="app.cerrarTicketModal()">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- Modal para ver detalles del ticket -->
        <div id="ticketDetalleModal" class="modal">
            <div class="modal-content ticket-detalle-content">
                <h3 id="ticketDetalleTitle">üé´ Detalles del Ticket</h3>
                <div id="ticketDetalleInfo">
                    <!-- Informaci√≥n del ticket se cargar√° aqu√≠ -->
                </div>
                <div id="ticketDetalleActions" class="modal-buttons">
                    <!-- Botones de acci√≥n se mostrar√°n seg√∫n el rol y estado -->
                </div>
            </div>
        </div>
        
        <!-- Modal para aprobar/rechazar ticket -->
        <div id="ticketDecisionModal" class="modal">
            <div class="modal-content">
                <h3 id="ticketDecisionTitle">üìã Decisi√≥n del Ticket</h3>
                <form id="ticketDecisionForm">
                    <div class="input-group">
                        <label for="decisionAccion">Acci√≥n:</label>
                        <select id="decisionAccion" required>
                            <option value="aprobar">‚úÖ Aprobar</option>
                            <option value="rechazar">‚ùå Rechazar</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="decisionComentarios">Comentarios:</label>
                        <textarea id="decisionComentarios" placeholder="Comentarios adicionales..."></textarea>
                    </div>
                    
                    <div class="modal-buttons">
                        <button type="submit" class="btn-primary">Confirmar</button>
                        <button type="button" onclick="app.cerrarDecisionModal()">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- Modal para entregar ticket -->
        <div id="ticketEntregaModal" class="modal">
            <div class="modal-content ticket-entrega-content">
                <h3>üì¶ Entregar Herramientas</h3>
                <div id="ticketEntregaItems">
                    <!-- Items para entregar se cargar√°n aqu√≠ -->
                </div>
                <div class="modal-buttons">
                    <button onclick="app.procesarEntrega()" class="btn-primary">‚úÖ Confirmar Entrega</button>
                    <button onclick="app.cerrarEntregaModal()">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="/static/app.js"></script>
</body>
</html> 